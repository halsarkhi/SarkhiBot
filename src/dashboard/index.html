<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KERNEL // HUD Dashboard</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Share+Tech+Mono&family=Rajdhani:wght@300;400;500;600;700&display=swap');

  :root {
    --bg: #05080c;
    --bg2: #0a0f18;
    --panel-bg: rgba(8,16,28,0.85);
    --panel-border: rgba(57,255,20,0.12);
    --panel-border-hover: rgba(57,255,20,0.35);
    --cyan: #39ff14;
    --cyan-dim: rgba(57,255,20,0.5);
    --green: #39ff14;
    --green-dim: rgba(57,255,20,0.4);
    --amber: #ffb000;
    --red: #ff3333;
    --magenta: #ff00ff;
    --blue: #4488ff;
    --dim: #3a5068;
    --text: #a0b8cc;
    --text-bright: #d0e0f0;
    --glow-cyan: 0 0 15px rgba(57,255,20,0.25), 0 0 40px rgba(57,255,20,0.08);
    --glow-green: 0 0 12px rgba(57,255,20,0.3);
    --glow-amber: 0 0 12px rgba(255,176,0,0.3);
    --font-hud: 'Orbitron', 'Share Tech Mono', monospace;
    --font-mono: 'Share Tech Mono', 'Fira Code', 'JetBrains Mono', monospace;
    --font-ui: 'Rajdhani', 'Share Tech Mono', sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--font-mono);
    font-size: 12px;
    line-height: 1.5;
    overflow-x: hidden;
    min-height: 100vh;
  }

  /* ── Grid background ── */
  .grid-bg {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 0;
    background:
      linear-gradient(rgba(57,255,20,0.015) 1px, transparent 1px),
      linear-gradient(90deg, rgba(57,255,20,0.015) 1px, transparent 1px);
    background-size: 60px 60px;
  }
  .grid-bg::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 50% 0%, rgba(57,255,20,0.05) 0%, transparent 60%),
      radial-gradient(ellipse at 50% 100%, rgba(57,255,20,0.03) 0%, transparent 50%);
  }

  /* ── Scanline overlay ── */
  .scanlines {
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.06) 2px,
      rgba(0,0,0,0.06) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  /* ── Horizontal sweep ── */
  @keyframes sweep {
    0% { top: -2px; opacity: 0; }
    5% { opacity: 1; }
    95% { opacity: 1; }
    100% { top: 100%; opacity: 0; }
  }

  /* ── Main container ── */
  .container {
    position: relative;
    z-index: 1;
    max-width: 1800px;
    margin: 0 auto;
    padding: 0 16px 24px;
  }

  /* ══════════════════════════════════════════
     HERO SECTION
  ══════════════════════════════════════════ */
  .hero {
    position: relative;
    text-align: center;
    padding: 48px 24px 40px;
    margin-bottom: 20px;
    overflow: hidden;
  }

  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse at 50% 30%, rgba(57,255,20,0.06) 0%, transparent 65%);
    pointer-events: none;
  }

  /* ── Hero decorative frame ── */
  .hero-frame {
    position: absolute;
    inset: 12px;
    pointer-events: none;
  }
  .hero-frame .corner {
    position: absolute;
    width: 40px;
    height: 40px;
  }
  .hero-frame .corner::before,
  .hero-frame .corner::after {
    content: '';
    position: absolute;
    background: var(--cyan);
    box-shadow: 0 0 6px var(--cyan);
  }
  .hero-frame .tl { top: 0; left: 0; }
  .hero-frame .tl::before { top: 0; left: 0; width: 40px; height: 1px; }
  .hero-frame .tl::after { top: 0; left: 0; width: 1px; height: 40px; }
  .hero-frame .tr { top: 0; right: 0; }
  .hero-frame .tr::before { top: 0; right: 0; width: 40px; height: 1px; }
  .hero-frame .tr::after { top: 0; right: 0; width: 1px; height: 40px; }
  .hero-frame .bl { bottom: 0; left: 0; }
  .hero-frame .bl::before { bottom: 0; left: 0; width: 40px; height: 1px; }
  .hero-frame .bl::after { bottom: 0; left: 0; width: 1px; height: 40px; }
  .hero-frame .br { bottom: 0; right: 0; }
  .hero-frame .br::before { bottom: 0; right: 0; width: 40px; height: 1px; }
  .hero-frame .br::after { bottom: 0; right: 0; width: 1px; height: 40px; }

  /* ── Horizontal accent lines ── */
  .hero-line {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: 1px;
    pointer-events: none;
  }
  .hero-line.top {
    top: 0;
    width: 60%;
    background: linear-gradient(90deg, transparent, var(--cyan-dim), transparent);
  }
  .hero-line.bottom {
    bottom: 0;
    width: 80%;
    background: linear-gradient(90deg, transparent, rgba(57,255,20,0.2), var(--cyan-dim), rgba(57,255,20,0.2), transparent);
  }

  .hero-ascii {
    position: relative;
    font-family: var(--font-mono);
    font-size: 11px;
    line-height: 1.15;
    color: var(--cyan);
    text-shadow: 0 0 12px rgba(57,255,20,0.3);
    white-space: pre;
    margin-bottom: 12px;
    letter-spacing: 0.5px;
  }

  .hero-ascii .logo-art { color: var(--cyan); }
  .hero-ascii .logo-text { color: var(--text-bright); text-shadow: 0 0 8px rgba(57,255,20,0.15); }

  /* ── Status bar ── */
  .status-bar {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--dim);
    padding: 10px 0 0;
  }

  .status-bar .label { color: var(--dim); text-transform: uppercase; letter-spacing: 1px; }
  .status-bar .value { color: var(--cyan); }
  .status-bar .sep { color: rgba(57,255,20,0.15); margin: 0 2px; }

  .conn-dot {
    display: inline-block;
    width: 7px; height: 7px;
    border-radius: 50%;
    background: var(--red);
    margin-right: 5px;
    vertical-align: middle;
    transition: all 0.3s;
  }
  .conn-dot.connected {
    background: var(--green);
    box-shadow: 0 0 8px var(--green), 0 0 16px rgba(57,255,20,0.2);
  }

  /* ══════════════════════════════════════════
     HUD PANEL SYSTEM
  ══════════════════════════════════════════ */
  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }

  @media (max-width: 1200px) { .grid { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }

  .grid .full-width { grid-column: 1 / -1; }

  /* ── Panel ── */
  .panel {
    position: relative;
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    overflow: hidden;
    clip-path: polygon(
      0 0,
      calc(100% - 16px) 0,
      100% 16px,
      100% 100%,
      16px 100%,
      0 calc(100% - 16px)
    );
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .panel::before {
    content: '';
    position: absolute;
    top: -1px;
    right: -1px;
    width: 24px;
    height: 24px;
    border-bottom: 1px solid var(--panel-border);
    transform: rotate(45deg);
    transform-origin: top right;
    pointer-events: none;
    z-index: 2;
  }

  .panel:hover {
    border-color: var(--panel-border-hover);
    box-shadow: 0 0 20px rgba(57,255,20,0.05), inset 0 0 30px rgba(57,255,20,0.02);
  }

  /* ── Corner decorations ── */
  .panel::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0;
    width: 16px; height: 16px;
    border-left: 1px solid var(--cyan-dim);
    border-bottom: 1px solid var(--cyan-dim);
    opacity: 0.3;
    pointer-events: none;
    z-index: 2;
  }

  /* ── Scan line effect ── */
  .panel .scan-line {
    position: absolute;
    left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(57,255,20,0.08), transparent);
    animation: sweep 8s linear infinite;
    pointer-events: none;
    z-index: 3;
  }

  /* ── Panel header ── */
  .panel-header {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 7px 14px;
    background:
      linear-gradient(90deg, rgba(57,255,20,0.04), transparent 60%);
    border-bottom: 1px solid var(--panel-border);
    font-family: var(--font-hud);
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 2px;
    color: var(--cyan);
    text-transform: uppercase;
    cursor: default;
    user-select: none;
  }

  .panel-header::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 60px;
    height: 1px;
    background: var(--cyan);
    box-shadow: 0 0 6px var(--cyan);
  }

  .panel-header .indicator {
    width: 5px; height: 5px;
    border-radius: 50%;
    background: var(--cyan);
    box-shadow: 0 0 6px var(--cyan);
    animation: pulse-dot 3s ease-in-out infinite;
  }

  @keyframes pulse-dot {
    0%, 100% { opacity: 0.5; box-shadow: 0 0 3px var(--cyan); }
    50% { opacity: 1; box-shadow: 0 0 8px var(--cyan); }
  }

  .panel-header .hud-tag {
    margin-left: auto;
    font-family: var(--font-mono);
    font-size: 9px;
    color: var(--dim);
    letter-spacing: 1px;
    font-weight: 400;
  }

  /* ── Panel body ── */
  .panel-body {
    padding: 10px 14px;
    max-height: 320px;
    overflow-y: auto;
  }
  .panel-body.tall { max-height: 450px; }

  .panel-body::-webkit-scrollbar { width: 3px; }
  .panel-body::-webkit-scrollbar-track { background: transparent; }
  .panel-body::-webkit-scrollbar-thumb { background: var(--cyan-dim); border-radius: 2px; }

  /* ══════════════════════════════════════════
     DATA ELEMENTS
  ══════════════════════════════════════════ */

  /* ── Data rows ── */
  .row {
    display: flex;
    justify-content: space-between;
    padding: 3px 0;
    border-bottom: 1px solid rgba(57,255,20,0.04);
  }
  .row:last-child { border-bottom: none; }
  .row .k { color: var(--dim); font-size: 11px; }
  .row .v { color: var(--cyan); text-align: right; font-size: 11px; }

  /* ── HUD Progress bars ── */
  .bar-track {
    position: relative;
    height: 6px;
    background: rgba(57,255,20,0.04);
    margin: 4px 0;
    overflow: hidden;
    clip-path: polygon(0 0, calc(100% - 3px) 0, 100% 3px, 100% 100%, 3px 100%, 0 calc(100% - 3px));
  }
  .bar-fill {
    height: 100%;
    transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1);
    position: relative;
  }
  .bar-fill::after {
    content: '';
    position: absolute;
    right: 0; top: 0; bottom: 0;
    width: 2px;
    background: inherit;
    box-shadow: 0 0 6px currentColor;
  }
  .bar-fill.green { background: linear-gradient(90deg, rgba(57,255,20,0.3), var(--green)); color: var(--green); }
  .bar-fill.cyan { background: linear-gradient(90deg, rgba(57,255,20,0.3), var(--cyan)); color: var(--cyan); }
  .bar-fill.amber { background: linear-gradient(90deg, rgba(255,176,0,0.3), var(--amber)); color: var(--amber); }
  .bar-fill.red { background: linear-gradient(90deg, rgba(255,51,51,0.3), var(--red)); color: var(--red); }

  /* ── Status badges ── */
  .badge {
    display: inline-block;
    padding: 1px 7px;
    font-family: var(--font-hud);
    font-size: 9px;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
    clip-path: polygon(4px 0, 100% 0, calc(100% - 4px) 100%, 0 100%);
  }
  .badge.running { background: rgba(57,255,20,0.12); color: var(--cyan); animation: pulse-badge 2s infinite; }
  .badge.completed { background: rgba(57,255,20,0.12); color: var(--green); }
  .badge.failed { background: rgba(255,51,51,0.12); color: var(--red); }
  .badge.cancelled { background: rgba(255,176,0,0.12); color: var(--amber); }
  .badge.queued { background: rgba(58,74,90,0.2); color: var(--dim); }

  @keyframes pulse-badge {
    0%, 100% { box-shadow: 0 0 4px rgba(57,255,20,0.2); }
    50% { box-shadow: 0 0 12px rgba(57,255,20,0.4); }
  }

  /* ── Job rows ── */
  .job-row {
    padding: 6px 0;
    border-bottom: 1px solid rgba(57,255,20,0.04);
    border-left: 2px solid transparent;
    padding-left: 8px;
    transition: border-color 0.2s;
  }
  .job-row:hover { border-left-color: var(--cyan-dim); }
  .job-row:last-child { border-bottom: none; }
  .job-meta { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
  .job-id { color: var(--amber); font-weight: 600; font-family: var(--font-hud); font-size: 10px; letter-spacing: 1px; }
  .job-type { color: var(--magenta); font-family: var(--font-mono); }
  .job-task { color: var(--text); font-size: 11px; margin-top: 3px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .job-sub { color: var(--dim); font-size: 10px; margin-top: 2px; }

  /* ── Log lines ── */
  .log-line { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 1px 0; font-size: 11px; }
  .log-line .ts { color: var(--dim); }
  .log-line .lvl-error { color: var(--red); font-weight: 700; }
  .log-line .lvl-warn { color: var(--amber); }
  .log-line .lvl-info { color: var(--green); }
  .log-line .lvl-debug { color: var(--dim); }
  .log-line .msg { color: var(--text); }

  /* ── Memory items ── */
  .mem-item { padding: 4px 0; border-bottom: 1px solid rgba(57,255,20,0.04); }
  .mem-item:last-child { border-bottom: none; }
  .mem-time { color: var(--dim); font-size: 10px; }
  .mem-type { font-family: var(--font-hud); font-size: 9px; font-weight: 600; letter-spacing: 1px; }
  .mem-type.interaction { color: var(--cyan); }
  .mem-type.thought { color: var(--magenta); }
  .mem-type.discovery { color: var(--amber); }
  .mem-type.creation { color: var(--green); }
  .mem-summary { color: var(--text); font-size: 11px; margin-top: 1px; }

  /* ── Share items ── */
  .share-item { padding: 4px 0; border-bottom: 1px solid rgba(57,255,20,0.04); }
  .share-pri.high { color: var(--cyan); }
  .share-pri.medium { color: var(--green); }
  .share-pri.low { color: var(--dim); }

  /* ── Character ── */
  .char-active { color: var(--cyan); font-size: 14px; font-family: var(--font-ui); font-weight: 600; margin-bottom: 6px; }
  .char-item { color: var(--dim); font-size: 11px; padding: 2px 0; transition: color 0.2s; }
  .char-item.active { color: var(--cyan); }

  /* ── Conversation ── */
  .conv-item { padding: 3px 0; display: flex; justify-content: space-between; border-bottom: 1px solid rgba(57,255,20,0.04); }
  .conv-item .chat-id { color: var(--green); font-family: var(--font-mono); }
  .conv-item .chat-id.life { color: var(--magenta); }

  /* ── Automation ── */
  .auto-item { padding: 5px 0; border-bottom: 1px solid rgba(57,255,20,0.04); }
  .auto-name { color: var(--cyan); font-weight: 600; font-family: var(--font-hud); font-size: 10px; letter-spacing: 1px; }
  .auto-detail { color: var(--dim); font-size: 10px; margin-top: 1px; }

  /* ── Self / Journal markdown ── */
  .md-content {
    white-space: pre-wrap;
    word-wrap: break-word;
    color: var(--text);
    font-size: 11px;
  }
  .md-content .ts-line { color: var(--cyan); }

  /* ── Evolution ── */
  .evo-stats-grid {
    display: flex;
    gap: 4px;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
  .evo-stat {
    flex: 1;
    min-width: 60px;
    text-align: center;
    padding: 6px 4px;
    background: rgba(57,255,20,0.02);
    border: 1px solid rgba(57,255,20,0.06);
    clip-path: polygon(4px 0, 100% 0, calc(100% - 4px) 100%, 0 100%);
  }
  .evo-stat .num { font-family: var(--font-hud); font-size: 16px; font-weight: 700; display: block; }
  .evo-stat .lbl { font-family: var(--font-hud); font-size: 8px; letter-spacing: 1px; color: var(--dim); display: block; margin-top: 2px; }
  .evo-proposal { padding: 5px 0; border-bottom: 1px solid rgba(57,255,20,0.04); }

  /* ── Life engine ── */
  .activity-bar { display: flex; align-items: center; gap: 6px; padding: 3px 0; }
  .activity-bar .name {
    width: 80px;
    text-align: right;
    color: var(--dim);
    font-family: var(--font-hud);
    font-size: 9px;
    letter-spacing: 0.5px;
  }
  .activity-bar .bar {
    flex: 1;
    height: 6px;
    background: rgba(57,255,20,0.04);
    overflow: hidden;
    clip-path: polygon(0 0, calc(100% - 3px) 0, 100% 3px, 100% 100%, 3px 100%, 0 calc(100% - 3px));
  }
  .activity-bar .fill {
    height: 100%;
    background: linear-gradient(90deg, rgba(57,255,20,0.3), var(--green));
    transition: width 0.6s ease;
  }
  .activity-bar .count { width: 30px; color: var(--green); font-size: 10px; font-family: var(--font-hud); }

  .empty-msg { color: var(--dim); font-style: italic; text-align: center; padding: 24px 0; font-size: 11px; letter-spacing: 1px; }

  .life-status {
    font-family: var(--font-hud);
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 3px;
    margin-bottom: 8px;
  }
  .life-status.active { color: var(--green); text-shadow: var(--glow-green); }
  .life-status.paused { color: var(--amber); text-shadow: var(--glow-amber); }
  .life-status.idle { color: var(--dim); }

  /* ══════════════════════════════════════════
     HUD RADAR WIDGET (hero decoration)
  ══════════════════════════════════════════ */
  .hud-radar {
    position: absolute;
    width: 120px; height: 120px;
    opacity: 0.15;
    pointer-events: none;
  }
  .hud-radar.left { left: 5%; top: 50%; transform: translateY(-50%); }
  .hud-radar.right { right: 5%; top: 50%; transform: translateY(-50%); }

  .hud-radar svg { width: 100%; height: 100%; }

  @keyframes radar-sweep {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  /* ── Responsive hero ── */
  @media (max-width: 768px) {
    .hero-ascii { font-size: 8px; }
    .hud-radar { display: none; }
  }

  @media (max-width: 480px) {
    .hero-ascii { font-size: 6px; }
    .hero { padding: 32px 12px 28px; }
  }
</style>
</head>
<body>

<div class="grid-bg"></div>
<div class="scanlines"></div>

<div class="container">

  <!-- ══════════════ HERO ══════════════ -->
  <div class="hero">
    <div class="hero-frame">
      <div class="corner tl"></div>
      <div class="corner tr"></div>
      <div class="corner bl"></div>
      <div class="corner br"></div>
    </div>
    <div class="hero-line top"></div>
    <div class="hero-line bottom"></div>

    <!-- Radar decorations -->
    <div class="hud-radar left">
      <svg viewBox="0 0 120 120">
        <circle cx="60" cy="60" r="55" fill="none" stroke="rgba(57,255,20,0.3)" stroke-width="0.5"/>
        <circle cx="60" cy="60" r="40" fill="none" stroke="rgba(57,255,20,0.2)" stroke-width="0.5"/>
        <circle cx="60" cy="60" r="25" fill="none" stroke="rgba(57,255,20,0.15)" stroke-width="0.5"/>
        <circle cx="60" cy="60" r="10" fill="none" stroke="rgba(57,255,20,0.1)" stroke-width="0.5"/>
        <line x1="5" y1="60" x2="115" y2="60" stroke="rgba(57,255,20,0.08)" stroke-width="0.5"/>
        <line x1="60" y1="5" x2="60" y2="115" stroke="rgba(57,255,20,0.08)" stroke-width="0.5"/>
        <g style="transform-origin:60px 60px; animation: radar-sweep 4s linear infinite;">
          <line x1="60" y1="60" x2="60" y2="5" stroke="rgba(57,255,20,0.6)" stroke-width="1"/>
          <path d="M60,60 L52,12 A55,55 0 0,1 60,5 Z" fill="rgba(57,255,20,0.08)"/>
        </g>
        <circle cx="75" cy="35" r="2" fill="rgba(57,255,20,0.5)"/>
        <circle cx="42" cy="48" r="1.5" fill="rgba(57,255,20,0.5)"/>
        <circle cx="80" cy="70" r="1.5" fill="rgba(57,255,20,0.3)"/>
      </svg>
    </div>
    <div class="hud-radar right">
      <svg viewBox="0 0 120 120">
        <circle cx="60" cy="60" r="55" fill="none" stroke="rgba(57,255,20,0.3)" stroke-width="0.5"/>
        <circle cx="60" cy="60" r="40" fill="none" stroke="rgba(57,255,20,0.2)" stroke-width="0.5"/>
        <circle cx="60" cy="60" r="25" fill="none" stroke="rgba(57,255,20,0.15)" stroke-width="0.5"/>
        <circle cx="60" cy="60" r="10" fill="none" stroke="rgba(57,255,20,0.1)" stroke-width="0.5"/>
        <line x1="5" y1="60" x2="115" y2="60" stroke="rgba(57,255,20,0.08)" stroke-width="0.5"/>
        <line x1="60" y1="5" x2="60" y2="115" stroke="rgba(57,255,20,0.08)" stroke-width="0.5"/>
        <g style="transform-origin:60px 60px; animation: radar-sweep 6s linear infinite reverse;">
          <line x1="60" y1="60" x2="60" y2="5" stroke="rgba(57,255,20,0.6)" stroke-width="1"/>
          <path d="M60,60 L52,12 A55,55 0 0,1 60,5 Z" fill="rgba(57,255,20,0.08)"/>
        </g>
        <circle cx="45" cy="30" r="2" fill="rgba(57,255,20,0.5)"/>
        <circle cx="78" cy="55" r="1.5" fill="rgba(57,255,20,0.4)"/>
      </svg>
    </div>

    <!-- ASCII Logo -->
    <pre class="hero-ascii"><span class="logo-art">          ▄▄████████▄▄
       ▄██▀▀        ▀▀██▄
     ▄█▀    ▄██████▄    ▀█▄
    █▀   ▄██▀      ▀██▄   ▀█
   █▀  ▄█▀   ▄████▄  ▀█▄  ▀█
  ▐█  ██   ▄█▀    ▀█▄  ██  █▌
  ▐█  █▌  █▀   ██   ▀█ ▐█  █▌
  ▐█  █▌  ▀█▄  ▀▀██▀  ▐█  █▌
   █▄  ██   ▀▀████▀  ██  ▄█
    █▄  ▀██▄      ▄██▀  ▄█
     ▀█▄   ▀██████▀   ▄█▀
       ▀██▄▄      ▄▄██▀
          ▀▀████████▀▀</span>

<span class="logo-text"> █▄▀ █▀▀ █▀█ █▄ █ █▀▀ █   █▀▄ █▀█ ▀█▀
 █▀▄ █▀▀ █▄▀ █ ██ █▀▀ █   ██▀ █ █  █
 █ █ █▄▄ █ █ █ ▀█ █▄▄ █▄▄ █▄▀ █▄█  █</span></pre>

    <!-- Status bar -->
    <div class="status-bar">
      <span><span class="conn-dot" id="conn-dot"></span><span class="label">link:</span> <span class="value" id="conn-status">CONNECTING</span></span>
      <span class="sep">//</span>
      <span><span class="label">status:</span> <span class="value" id="hdr-status">ONLINE</span></span>
      <span class="sep">//</span>
      <span><span class="label">uptime:</span> <span class="value" id="hdr-uptime">--</span></span>
      <span class="sep">//</span>
      <span><span class="label">pid:</span> <span class="value" id="hdr-pid">--</span></span>
      <span class="sep">//</span>
      <span><span class="label">node:</span> <span class="value" id="hdr-node">--</span></span>
      <span class="sep">//</span>
      <span><span class="label">time:</span> <span class="value" id="hdr-clock">--</span></span>
    </div>
  </div>

  <!-- ══════════════ DASHBOARD GRID ══════════════ -->
  <div class="grid">

    <!-- SYS.STATUS -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>SYS.STATUS<span class="hud-tag">TELEMETRY</span></div>
      <div class="panel-body" id="system-body"></div>
    </div>

    <!-- NEURAL.CONFIG -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>NEURAL.CONFIG<span class="hud-tag">SETTINGS</span></div>
      <div class="panel-body" id="config-body"></div>
    </div>

    <!-- ACTIVE.JOBS -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>ACTIVE.JOBS<span class="hud-tag">SWARM</span></div>
      <div class="panel-body" id="jobs-body"></div>
    </div>

    <!-- AUTOMATIONS -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>AUTOMATIONS<span class="hud-tag">SCHEDULER</span></div>
      <div class="panel-body" id="auto-body"></div>
    </div>

    <!-- LIFE.ENGINE -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>LIFE.ENGINE<span class="hud-tag">AUTONOMOUS</span></div>
      <div class="panel-body" id="life-body"></div>
    </div>

    <!-- EVOLUTION -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>EVOLUTION<span class="hud-tag">SELF-IMPROVE</span></div>
      <div class="panel-body" id="evo-body"></div>
    </div>

    <!-- MEMORY.BANK -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>MEMORY.BANK<span class="hud-tag">EPISODIC</span></div>
      <div class="panel-body" id="mem-body"></div>
    </div>

    <!-- JOURNAL.TODAY -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>JOURNAL.TODAY<span class="hud-tag">LOG</span></div>
      <div class="panel-body" id="journal-body"></div>
    </div>

    <!-- SHARE.QUEUE -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>SHARE.QUEUE<span class="hud-tag">OUTBOUND</span></div>
      <div class="panel-body" id="shares-body"></div>
    </div>

    <!-- CHARACTER -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>CHARACTER<span class="hud-tag">PERSONA</span></div>
      <div class="panel-body" id="char-body"></div>
    </div>

    <!-- CONVERSATIONS -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>CONVERSATIONS<span class="hud-tag">CHANNELS</span></div>
      <div class="panel-body" id="conv-body"></div>
    </div>

    <!-- SELF.AWARENESS -->
    <div class="panel">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>SELF.AWARENESS<span class="hud-tag">IDENTITY</span></div>
      <div class="panel-body" id="self-body"></div>
    </div>

    <!-- LOG.STREAM -->
    <div class="panel full-width">
      <div class="scan-line"></div>
      <div class="panel-header"><span class="indicator"></span>LOG.STREAM<span class="hud-tag">REAL-TIME</span></div>
      <div class="panel-body tall" id="logs-body"></div>
    </div>

  </div>
</div>

<script>
(function() {
  // ── Utilities ──
  function esc(s) {
    if (!s) return '';
    return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
  }

  function formatDuration(seconds) {
    if (seconds == null || seconds < 0) return '--';
    const s = Math.floor(seconds);
    if (s < 60) return s + 's';
    if (s < 3600) return Math.floor(s/60) + 'm ' + (s%60) + 's';
    const h = Math.floor(s/3600);
    const m = Math.floor((s%3600)/60);
    return h + 'h ' + m + 'm';
  }

  function timeAgo(ts) {
    if (!ts) return 'never';
    const diff = Date.now() - ts;
    const s = Math.floor(diff/1000);
    if (s < 60) return 'just now';
    if (s < 3600) return Math.floor(s/60) + 'm ago';
    if (s < 86400) return Math.floor(s/3600) + 'h ago';
    return Math.floor(s/86400) + 'd ago';
  }

  function formatBytes(b) {
    if (b < 1024) return b + ' B';
    if (b < 1048576) return (b/1024).toFixed(1) + ' KB';
    if (b < 1073741824) return (b/1048576).toFixed(1) + ' MB';
    return (b/1073741824).toFixed(2) + ' GB';
  }

  function barColor(pct) {
    if (pct < 50) return 'green';
    if (pct < 80) return 'amber';
    return 'red';
  }

  function makeBar(label, pct, color) {
    return `<div class="row"><span class="k">${esc(label)}</span><span class="v">${pct.toFixed(1)}%</span></div>
<div class="bar-track"><div class="bar-fill ${color || barColor(pct)}" style="width:${Math.min(pct,100)}%"></div></div>`;
  }

  const $ = (id) => document.getElementById(id);

  // ── Clock ──
  setInterval(() => {
    const now = new Date();
    const pad = n => String(n).padStart(2,'0');
    $('hdr-clock').textContent = now.getFullYear() + '.' + pad(now.getMonth()+1) + '.' + pad(now.getDate()) + ' ' + pad(now.getHours()) + ':' + pad(now.getMinutes()) + ':' + pad(now.getSeconds());
  }, 1000);

  // ── Load config & self once ──
  let configData = null;
  let selfData = null;

  fetch('/api/config').then(r=>r.json()).then(d => { configData = d; renderConfig(d); });
  fetch('/api/self').then(r=>r.json()).then(d => { selfData = d; renderSelf(d); });

  // ── SSE ──
  let reconnectDelay = 1000;

  function connectSSE() {
    const es = new EventSource('/events');

    es.onopen = () => {
      reconnectDelay = 1000;
      $('conn-dot').classList.add('connected');
      $('conn-status').textContent = 'ONLINE';
    };

    es.onmessage = (evt) => {
      try {
        const snap = JSON.parse(evt.data);
        renderSnapshot(snap);
      } catch(e) { console.warn('SSE parse error', e); }
    };

    es.onerror = () => {
      es.close();
      $('conn-dot').classList.remove('connected');
      $('conn-status').textContent = 'RECONNECTING';
      setTimeout(connectSSE, reconnectDelay);
      reconnectDelay = Math.min(reconnectDelay * 1.5, 15000);
    };
  }

  connectSSE();

  // ── Render ──

  function renderSnapshot(snap) {
    renderSystem(snap.system);
    renderJobs(snap.jobs);
    renderAutomations(snap.automations);
    renderLife(snap.life);
    renderMemories(snap.memories);
    renderJournal(snap.journal);
    renderEvolution(snap.evolution);
    renderConversations(snap.conversations);
    renderCharacter(snap.character);
    renderShares(snap.shares);
    renderLogs(snap.logs);
  }

  function renderSystem(sys) {
    if (!sys) return;
    $('hdr-uptime').textContent = formatDuration(sys.uptime);
    $('hdr-pid').textContent = sys.pid;
    $('hdr-node').textContent = sys.nodeVersion;

    const cpuMax = sys.cpu.cores;
    const loadPct1 = (sys.cpu.load1 / cpuMax * 100);
    const loadPct5 = (sys.cpu.load5 / cpuMax * 100);
    const loadPct15 = (sys.cpu.load15 / cpuMax * 100);
    const ramPct = parseFloat(sys.ram.percent);

    let html = '';
    html += makeBar('CPU 1m (' + sys.cpu.load1.toFixed(2) + '/' + cpuMax + ')', loadPct1);
    html += makeBar('CPU 5m (' + sys.cpu.load5.toFixed(2) + '/' + cpuMax + ')', loadPct5);
    html += makeBar('CPU 15m (' + sys.cpu.load15.toFixed(2) + '/' + cpuMax + ')', loadPct15);
    html += makeBar('RAM (' + formatBytes(sys.ram.used) + '/' + formatBytes(sys.ram.total) + ')', ramPct);
    html += `<div class="row"><span class="k">Heap</span><span class="v">${formatBytes(sys.process.heap)} / ${formatBytes(sys.process.heapTotal)}</span></div>`;
    html += `<div class="row"><span class="k">RSS</span><span class="v">${formatBytes(sys.process.rss)}</span></div>`;
    html += `<div class="row"><span class="k">Uptime</span><span class="v">${formatDuration(sys.uptime)}</span></div>`;
    $('system-body').innerHTML = html;
  }

  function renderConfig(cfg) {
    if (!cfg) return;
    let html = '';
    html += `<div class="row"><span class="k">Orch Provider</span><span class="v">${esc(cfg.orchestrator.provider)}</span></div>`;
    html += `<div class="row"><span class="k">Orch Model</span><span class="v">${esc(cfg.orchestrator.model)}</span></div>`;
    html += `<div class="row"><span class="k">Orch Key</span><span class="v">${esc(cfg.orchestrator.api_key)}</span></div>`;
    html += `<div class="row"><span class="k">Brain Provider</span><span class="v">${esc(cfg.brain.provider)}</span></div>`;
    html += `<div class="row"><span class="k">Brain Model</span><span class="v">${esc(cfg.brain.model)}</span></div>`;
    html += `<div class="row"><span class="k">Brain Key</span><span class="v">${esc(cfg.brain.api_key)}</span></div>`;
    html += `<div class="row"><span class="k">Max Tool Depth</span><span class="v">${cfg.brain.max_tool_depth || '--'}</span></div>`;
    if (cfg.swarm) {
      html += `<div class="row"><span class="k">Max Jobs</span><span class="v">${cfg.swarm.max_concurrent_jobs || '--'}</span></div>`;
      html += `<div class="row"><span class="k">Job Timeout</span><span class="v">${cfg.swarm.job_timeout_seconds || '--'}s</span></div>`;
    }
    if (cfg.life) {
      html += `<div class="row"><span class="k">Life</span><span class="v">${cfg.life.enabled ? 'ENABLED' : 'DISABLED'}</span></div>`;
      if (cfg.life.self_coding) {
        html += `<div class="row"><span class="k">Self-Coding</span><span class="v">${cfg.life.self_coding.enabled ? 'ON' : 'OFF'}</span></div>`;
      }
    }
    html += `<div class="row"><span class="k">Allowed Users</span><span class="v">${cfg.telegram.allowed_users}</span></div>`;
    $('config-body').innerHTML = html;
  }

  function renderJobs(jobs) {
    if (!jobs || jobs.length === 0) {
      $('jobs-body').innerHTML = '<div class="empty-msg">NO ACTIVE JOBS</div>';
      return;
    }
    let html = '';
    for (const j of jobs) {
      html += `<div class="job-row">
<div class="job-meta">
  <span class="job-id">${esc(j.id)}</span>
  <span class="job-type">${esc(j.type)}</span>
  <span class="badge ${j.status}">${j.status.toUpperCase()}</span>
  <span style="color:var(--dim)">${formatDuration(j.duration)}</span>
  <span style="color:var(--dim)">LLM:${j.llmCalls || 0} T:${j.toolCalls || 0}</span>
</div>
<div class="job-task">${esc((j.task||'').slice(0,120))}</div>`;
      if (j.lastThinking) {
        html += `<div class="job-sub">${esc(j.lastThinking.slice(0,100))}</div>`;
      }
      if (j.progress && j.progress.length > 0) {
        html += `<div class="job-sub">${esc(j.progress[j.progress.length-1])}</div>`;
      }
      html += '</div>';
    }
    $('jobs-body').innerHTML = html;
  }

  function renderAutomations(autos) {
    if (!autos || autos.length === 0) {
      $('auto-body').innerHTML = '<div class="empty-msg">NO AUTOMATIONS</div>';
      return;
    }
    let html = '';
    for (const a of autos) {
      const status = a.enabled ? '<span style="color:var(--green)">ENABLED</span>' : '<span style="color:var(--amber)">PAUSED</span>';
      const sched = a.schedule ? (a.schedule.expression || a.schedule.type + (a.schedule.minutes ? ' ' + a.schedule.minutes + 'm' : '')) : '--';
      html += `<div class="auto-item">
<div><span class="auto-name">${esc(a.name)}</span> ${status}</div>
<div class="auto-detail">Schedule: ${esc(sched)} | Runs: ${a.runCount} | Next: ${a.nextRun ? timeAgo(a.nextRun).replace(' ago','') : '--'}</div>`;
      if (a.lastError) html += `<div class="auto-detail" style="color:var(--red)">ERR: ${esc(a.lastError.slice(0,80))}</div>`;
      html += '</div>';
    }
    $('auto-body').innerHTML = html;
  }

  function renderLife(life) {
    if (!life || life.status === 'unknown') {
      $('life-body').innerHTML = '<div class="empty-msg">LIFE ENGINE UNAVAILABLE</div>';
      return;
    }
    let html = '';
    const statusClass = life.paused ? 'paused' : (life.status === 'active' ? 'active' : 'idle');
    html += `<div class="life-status ${statusClass}">${(life.paused ? 'PAUSED' : life.status || 'IDLE').toUpperCase()}</div>`;
    html += `<div class="row"><span class="k">Total Activities</span><span class="v">${life.totalActivities || 0}</span></div>`;
    html += `<div class="row"><span class="k">Last Activity</span><span class="v">${esc(life.lastActivity || 'none')} (${esc(life.lastActivityAgo || 'never')})</span></div>`;

    if (life.activityCounts) {
      const counts = life.activityCounts;
      const max = Math.max(1, ...Object.values(counts));
      html += '<div style="margin-top:8px">';
      for (const [name, count] of Object.entries(counts)) {
        const pct = (count / max * 100).toFixed(0);
        html += `<div class="activity-bar">
<span class="name">${esc(name)}</span>
<span class="bar"><span class="fill" style="width:${pct}%"></span></span>
<span class="count">${count}</span>
</div>`;
      }
      html += '</div>';
    }
    $('life-body').innerHTML = html;
  }

  function renderEvolution(evo) {
    if (!evo) { $('evo-body').innerHTML = '<div class="empty-msg">NO DATA</div>'; return; }
    let html = '';
    if (evo.stats) {
      const s = evo.stats;
      html += '<div class="evo-stats-grid">';
      html += `<div class="evo-stat"><span class="num" style="color:var(--text-bright)">${s.totalProposals||0}</span><span class="lbl">TOTAL</span></div>`;
      html += `<div class="evo-stat"><span class="num" style="color:var(--green)">${s.merged||0}</span><span class="lbl">MERGED</span></div>`;
      html += `<div class="evo-stat"><span class="num" style="color:var(--amber)">${s.rejected||0}</span><span class="lbl">REJECTED</span></div>`;
      html += `<div class="evo-stat"><span class="num" style="color:var(--red)">${s.failed||0}</span><span class="lbl">FAILED</span></div>`;
      html += `<div class="evo-stat"><span class="num" style="color:var(--cyan)">${(s.successRate||0).toFixed(0)}%</span><span class="lbl">SUCCESS</span></div>`;
      html += '</div>';
    }
    if (evo.active) {
      const a = evo.active;
      html += `<div class="evo-proposal" style="border-left:2px solid var(--cyan);padding-left:8px">`;
      html += `<div style="color:var(--cyan);font-weight:600;font-family:var(--font-hud);font-size:10px;letter-spacing:1px">ACTIVE: ${esc(a.status)}</div>`;
      html += `<div style="color:var(--text);font-size:11px;margin-top:2px">${esc(a.trigger||'')}</div>`;
      if (a.branch) html += `<div style="color:var(--amber);font-size:10px;margin-top:1px">Branch: ${esc(a.branch)}</div>`;
      if (a.filesChanged?.length) html += `<div style="color:var(--dim);font-size:10px">Files: ${a.filesChanged.length}</div>`;
      html += '</div>';
    }
    if (evo.recent?.length > 0) {
      html += '<div style="margin-top:8px;color:var(--dim);font-family:var(--font-hud);font-size:9px;letter-spacing:1px">RECENT</div>';
      for (const p of evo.recent) {
        html += `<div class="evo-proposal">
<span class="badge ${p.status === 'merged' ? 'completed' : p.status === 'failed' ? 'failed' : p.status === 'rejected' ? 'cancelled' : 'queued'}">${esc(p.status)}</span>
<span style="color:var(--text);font-size:11px;margin-left:6px">${esc((p.trigger||'').slice(0,60))}</span>
<span style="color:var(--dim);font-size:10px;margin-left:6px">${timeAgo(p.createdAt)}</span>
</div>`;
      }
    }
    if (!evo.stats?.totalProposals && !evo.active && (!evo.recent || evo.recent.length === 0)) {
      html = '<div class="empty-msg">NO EVOLUTION DATA</div>';
    }
    $('evo-body').innerHTML = html;
  }

  function renderMemories(mems) {
    if (!mems || mems.length === 0) {
      $('mem-body').innerHTML = '<div class="empty-msg">NO RECENT MEMORIES</div>';
      return;
    }
    let html = '';
    for (const m of mems) {
      const typeClass = m.type || 'interaction';
      html += `<div class="mem-item">
<span class="mem-time">${timeAgo(m.timestamp)}</span>
<span class="mem-type ${esc(typeClass)}">${esc((m.type||'').toUpperCase())}</span>
<div class="mem-summary">${esc((m.summary||'').slice(0,120))}</div>
</div>`;
    }
    $('mem-body').innerHTML = html;
  }

  function renderJournal(j) {
    if (!j || !j.content) {
      $('journal-body').innerHTML = '<div class="empty-msg">NO JOURNAL ENTRY TODAY</div>';
      return;
    }
    const escaped = esc(j.content);
    const highlighted = escaped.replace(/(\d{1,2}:\d{2}(?::\d{2})?(?:\s*(?:AM|PM))?)/gi, '<span class="ts-line">$1</span>');
    $('journal-body').innerHTML = `<div class="md-content">${highlighted}</div>`;
  }

  function renderShares(shares) {
    if (!shares || shares.length === 0) {
      $('shares-body').innerHTML = '<div class="empty-msg">NO PENDING SHARES</div>';
      return;
    }
    let html = '';
    for (const s of shares) {
      const pri = s.priority || 'low';
      html += `<div class="share-item">
<span class="share-pri ${esc(pri)}">[${pri.toUpperCase()}]</span>
<span style="color:var(--dim);font-size:10px">${esc(s.source||'')} · ${timeAgo(s.createdAt)}</span>
<div style="color:var(--text);font-size:11px;margin-top:1px">${esc((s.content||'').slice(0,120))}</div>
</div>`;
    }
    $('shares-body').innerHTML = html;
  }

  function renderCharacter(ch) {
    if (!ch) { $('char-body').innerHTML = '<div class="empty-msg">NO DATA</div>'; return; }
    let html = '';
    if (ch.active) {
      html += `<div class="char-active">${esc(ch.active.emoji||'')} ${esc(ch.active.name)} <span style="color:var(--dim);font-size:11px">${esc(ch.active.type||'')}</span></div>`;
      if (ch.active.tagline) html += `<div style="color:var(--text);font-size:11px;margin-bottom:8px;font-style:italic">${esc(ch.active.tagline)}</div>`;
    }
    if (ch.characters?.length > 0) {
      for (const c of ch.characters) {
        const isActive = ch.active && c.id === ch.active.id;
        html += `<div class="char-item ${isActive ? 'active' : ''}">${esc(c.emoji||'')} ${esc(c.name)} <span style="color:var(--dim)">${esc(c.type||'')}</span></div>`;
      }
    }
    $('char-body').innerHTML = html;
  }

  function renderConversations(convs) {
    if (!convs || convs.length === 0) {
      $('conv-body').innerHTML = '<div class="empty-msg">NO CONVERSATIONS</div>';
      return;
    }
    let html = '';
    for (const c of convs) {
      const isLife = c.chatId === '__life__';
      html += `<div class="conv-item">
<span class="chat-id ${isLife ? 'life' : ''}">${esc(c.chatId)}</span>
<span style="color:var(--dim)">${c.messageCount} msgs · ${timeAgo(c.lastTimestamp)}</span>
</div>`;
    }
    $('conv-body').innerHTML = html;
  }

  function renderSelf(s) {
    if (!s || !s.content) {
      $('self-body').innerHTML = '<div class="empty-msg">NO SELF-AWARENESS DATA</div>';
      return;
    }
    $('self-body').innerHTML = `<div class="md-content">${esc(s.content)}</div>`;
  }

  function renderLogs(logs) {
    if (!logs || logs.length === 0) {
      $('logs-body').innerHTML = '<div class="empty-msg">NO LOGS</div>';
      return;
    }
    const body = $('logs-body');
    const wasAtBottom = body.scrollTop + body.clientHeight >= body.scrollHeight - 20;

    let html = '';
    for (const l of logs) {
      const lvl = (l.level || 'info').toLowerCase();
      const ts = l.timestamp ? l.timestamp.replace(/^.*T/, '').replace(/\..*$/, '') : '';
      html += `<div class="log-line"><span class="ts">[${esc(ts)}]</span> <span class="lvl-${lvl}">${esc(lvl.toUpperCase().padEnd(5))}</span> <span class="msg">${esc(l.message)}</span></div>`;
    }
    body.innerHTML = html;

    if (wasAtBottom) {
      body.scrollTop = body.scrollHeight;
    }
  }

})();
</script>
</body>
</html>
